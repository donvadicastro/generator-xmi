<%- include('partial/collaboration/import', {entity: entity}) -%>


export class <%= entity.name %> {
    <%- include('partial/collaboration/constructor', {entity: entity}) -%>

    /**
    /* Execute process
    */
    run(inputState: any) {
        let flowAsync = Promise.resolve(inputState);

        // Configure state storage
        flowAsync = flowAsync.then((state: any) => {
            console.log('--> initialize local state storage');
            storage.init(/* options ... */);

            return state;
        });

        // define flow
        <%- include('partial/collaboration/flow', {entity: entity}) -%>

        return flowAsync.catch(x => console.log(chalk.red('ERROR: '), x));
    }
}
